# Story 3.1: Lecturer Course and Assignment Creation and Management

## Status
Draft

## Story
**As a** lecturer,  
**I want** to create and manage courses and assignments,  
**so that** I can organize my teaching activities and provide structured learning experiences for students

## Acceptance Criteria
1. Lecturer can create new courses with title, description, and semester information
2. Lecturer can edit existing course details and settings
3. Lecturer can create assignments within their courses with due dates and descriptions
4. Lecturer can edit assignment details, due dates, and requirements
5. Lecturer can set course and assignment visibility (published/draft)
6. Lecturer can delete courses and assignments they own
7. Only lecturers can access course and assignment creation features
8. Lecturer sees a dashboard with all their courses and assignments

## Tasks / Subtasks

- [ ] Task 1: Extend course and assignment models for lecturer ownership (AC: 1, 3, 6)
  - [ ] Add lecturerId field to Course model
  - [ ] Add ownership validation to Assignment model
  - [ ] Update Course model with lecturer-specific fields (visibility, settings)
  - [ ] Add proper foreign key relationships for lecturer ownership
  - [ ] Update Zod validation schemas for lecturer course data

- [ ] Task 2: Implement course creation and management APIs (AC: 1, 2, 5, 7)
  - [ ] Create Server Action for course creation
  - [ ] Add Server Action for course editing and updates
  - [ ] Implement lecturer role verification for course operations
  - [ ] Add course visibility and publishing controls
  - [ ] Create course deletion with safety checks

- [ ] Task 3: Implement assignment creation and management APIs (AC: 3, 4, 5, 7)
  - [ ] Create Server Action for assignment creation within courses
  - [ ] Add Server Action for assignment editing and updates
  - [ ] Implement assignment-course ownership validation
  - [ ] Add assignment visibility and due date management
  - [ ] Create assignment deletion with submission checks

- [ ] Task 4: Build course management UI components (AC: 1, 2, 5, 8)
  - [ ] Create CourseCreationForm with title, description, semester fields
  - [ ] Build CourseEditForm for updating course details
  - [ ] Add CourseCard component for lecturer course dashboard
  - [ ] Implement course visibility toggles and settings
  - [ ] Style components with shadcn/ui for professional lecturer interface

- [ ] Task 5: Build assignment management UI components (AC: 3, 4, 5, 8)
  - [ ] Create AssignmentCreationForm with due dates and descriptions
  - [ ] Build AssignmentEditForm for updating assignment details
  - [ ] Add AssignmentCard component showing assignment overview
  - [ ] Implement assignment status indicators and controls
  - [ ] Create assignment list view within course management

- [ ] Task 6: Create lecturer dashboard and navigation (AC: 8)
  - [ ] Build lecturer dashboard at `/dashboard/lecturer`
  - [ ] Add course management page at `/dashboard/lecturer/courses`
  - [ ] Create course detail page at `/dashboard/lecturer/courses/[id]`
  - [ ] Add assignment management within course pages
  - [ ] Implement breadcrumb navigation and page organization

- [ ] Task 7: Add lecturer course and assignment controls (AC: 2, 4, 6)
  - [ ] Implement course editing interface with form validation
  - [ ] Add assignment editing with due date controls
  - [ ] Create confirmation dialogs for deletion operations
  - [ ] Add bulk actions for managing multiple assignments
  - [ ] Implement course and assignment status management

- [ ] Task 8: Test lecturer course and assignment management (AC: 1, 2, 3, 4, 5, 6, 7, 8)
  - [ ] Test course creation with various data inputs
  - [ ] Test course editing and settings updates
  - [ ] Test assignment creation within courses
  - [ ] Test assignment editing and due date changes
  - [ ] Test visibility controls for courses and assignments
  - [ ] Test deletion operations with safety checks
  - [ ] Test lecturer role access control
  - [ ] Test lecturer dashboard functionality and navigation

## Dev Notes

### Previous Epic Insights
**Epic 1** established:
- Lecturer role authentication with BetterAuth
- Lecturer dashboard layout at `/dashboard/lecturer`
- Role-based access control with middleware
- User model with lecturer role support

**Epic 2** established:
- Course model with basic structure and student enrollment
- Assignment model with due dates and submission tracking
- Material model for course content
- Student-facing course and assignment interfaces

### Lecturer Course Management Architecture
- **Lecturer Tools**: Powerful tools to manage teaching activities [Source: prd/07-7-epics-stories.md]
- **Course Management**: Lecturers can create and manage courses and assignments [Source: prd/07-7-epics-stories.md]
- **Lecturer Features**: Course management, assignment creation, material uploads [Source: prd/06-6-features-by-role.md]

### Database Schema Requirements
- **Course Model**: Extend existing model with lecturerId and lecturer-specific fields
- **Assignment Model**: Extend existing model with lecturer ownership validation
- **User Model**: Existing model with Lecturer role support from Epic 1
- **Ownership Relations**: Proper lecturer-course and lecturer-assignment relationships
- **ORM**: Prisma for lecturer course and assignment operations [Source: architecture/04-database.md]
- **Database**: NeonDB PostgreSQL for lecturer data storage [Source: architecture/04-database.md]

### Frontend Architecture Requirements
- **Framework**: Next.js App Router with lecturer dashboard integration [Source: architecture/01-frontend.md]
- **UI Components**: shadcn/ui components for professional lecturer interface [Source: architecture/01-frontend.md]
- **Styling**: TailwindCSS for responsive course management interface [Source: architecture/01-frontend.md]
- **Lecturer Dashboard**: Extension of existing `/dashboard/lecturer` layout [Source: Epic 1]

### API Implementation Requirements
- **Server Actions**: Next.js Server Actions for course and assignment operations [Source: architecture/02-backend-logic.md]
- **Validation**: Zod for course and assignment data validation [Source: architecture/02-backend-logic.md]
- **Authorization**: Lecturer role verification for all course management operations

### Data Models Extension
```typescript
// Extend existing Course model
Course {
  id, title, description, semester, visibility, lecturerId, createdAt, updatedAt,
  lecturer: User, assignments: Assignment[], materials: Material[], enrollments: Enrollment[]
}

// Extend existing Assignment model
Assignment {
  id, title, description, dueDate, courseId, createdAt, updatedAt,
  course: Course, submissions: Submission[]
}

// Course visibility enum
CourseVisibility {
  DRAFT, PUBLISHED, ARCHIVED
}

// Assignment status enum
AssignmentStatus {
  DRAFT, PUBLISHED, CLOSED
}
```

### File Locations (Building on Previous Epics)
- Lecturer course components: `src/components/lecturer/CourseCreationForm.tsx`, `src/components/lecturer/CourseCard.tsx`
- Lecturer assignment components: `src/components/lecturer/AssignmentCreationForm.tsx`, `src/components/lecturer/AssignmentCard.tsx`
- Lecturer pages: `src/app/dashboard/lecturer/courses/page.tsx`
- Course detail: `src/app/dashboard/lecturer/courses/[id]/page.tsx`
- Lecturer APIs: `src/app/dashboard/lecturer/courses/actions.ts`

### Course Creation and Management
- **Course Fields**: Title, description, semester, visibility status
- **Course Settings**: Enrollment controls, visibility rules, course metadata
- **Course Lifecycle**: Draft → Published → Archived states
- **Course Ownership**: Lecturers can only manage their own courses
- **Course Validation**: Proper form validation and error handling

### Assignment Creation and Management
- **Assignment Fields**: Title, description, due date, course association
- **Assignment Settings**: Submission rules, deadline enforcement, grading criteria
- **Assignment Lifecycle**: Draft → Published → Closed states
- **Assignment Ownership**: Assignments belong to courses owned by lecturer
- **Assignment Validation**: Due date validation and requirement checking

### Security and Access Control
- **Lecturer-Only Access**: Verify lecturer role for all course management features
- **Ownership Verification**: Lecturers can only manage their own courses and assignments
- **Course Access Control**: Proper authorization for course creation and editing
- **Assignment Security**: Validate assignment-course ownership relationships
- **Data Validation**: Sanitize and validate all lecturer inputs

### UI/UX Requirements for Lecturers
- **Professional Interface**: Clean, efficient course management tools
- **Course Dashboard**: Overview of all lecturer courses and activities
- **Form Design**: Intuitive course and assignment creation forms
- **Status Management**: Clear indicators for course and assignment states
- **Bulk Operations**: Efficient management of multiple assignments
- **Responsive Design**: Works well on desktop and tablet for lecture prep

### Integration Points
- **Authentication**: Leverages Epic 1 lecturer authentication and role verification
- **Course System**: Extends Course model established in Epic 2
- **Assignment System**: Extends Assignment model from Epic 2
- **Student Interface**: Lecturer-created content appears in student dashboards

### Business Rules
- **Course Ownership**: Each course must have exactly one lecturer owner
- **Assignment Ownership**: Assignments inherit course ownership
- **Visibility Control**: Lecturers control when courses and assignments are visible to students
- **Deletion Safety**: Prevent deletion of courses with active enrollments
- **Semester Management**: Courses associated with specific semesters

### Workflow Integration
- **Course Creation**: Create course → Add assignments → Upload materials → Publish
- **Student Enrollment**: Admin enrolls students in lecturer courses (Epic 4 integration)
- **Content Management**: Foundation for material upload (Story 3.2)
- **Grading Workflow**: Foundation for assignment grading (Story 3.3)

### Performance Considerations
- **Efficient Queries**: Optimized queries for lecturer course lists
- **Ownership Filtering**: Fast filtering by lecturer ownership
- **Course Loading**: Lazy loading for course details and assignments
- **Dashboard Performance**: Efficient lecturer dashboard data aggregation

### Testing Requirements
- **Course Management Tests**: Creation, editing, deletion of courses
- **Assignment Management Tests**: Creation, editing, deletion of assignments
- **Ownership Tests**: Verify lecturer can only manage own content
- **Access Control Tests**: Verify lecturer role requirements
- **Validation Tests**: Form validation and data integrity
- **UI Tests**: Lecturer interface usability and responsiveness
- **Integration Tests**: End-to-end course and assignment management workflow

### Project Structure Notes
Building on previous epics:
- Lecturer authentication and dashboard from Epic 1
- Course and Assignment models established in Epic 2
- Need to add lecturer ownership to existing models
- Need to create lecturer-specific UI components and workflows
- Foundation for material upload and grading features in subsequent stories

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-07-23 | 1.0 | Initial story creation | Scrum Master (Bob) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References  
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent QA review of the completed story implementation*
