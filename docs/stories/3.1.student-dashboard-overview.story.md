# Story 3.1: Student Dashboard Overview

## Status
Draft

## Story
**As a** student,
**I want to** see an overview of my courses and upcoming tasks,
**so that** I can stay organized and on track

## Acceptance Criteria
1. Dashboard shows enrolled courses with quick access
2. Recent activity feed displays updates from courses
3. Upcoming assignments and deadlines are prominently displayed
4. Quick navigation to different sections (calendar, assignments, grades)
5. Dashboard is responsive and loads quickly

## Tasks / Subtasks
- [ ] Create main dashboard layout (AC: 1, 4, 5)
  - [ ] Build responsive dashboard grid layout with Tailwind CSS
  - [ ] Create navigation sidebar with quick access links
  - [ ] Implement dashboard header with user info and notifications
  - [ ] Add mobile-first responsive design for all screen sizes
  - [ ] Optimize loading performance with skeleton states
- [ ] Build enrolled courses display (AC: 1)
  - [ ] Create course card component with course information
  - [ ] Display course progress indicators and completion status
  - [ ] Add quick action buttons (view materials, assignments, grades)
  - [ ] Implement course thumbnail/banner images (storage optimized)
  - [ ] Show enrollment status and course activity level
- [ ] Implement activity feed system (AC: 2)
  - [ ] Create activity feed component with timeline design
  - [ ] Display recent course updates, new materials, announcements
  - [ ] Add activity filtering by course and activity type
  - [ ] Implement real-time activity updates using Supabase subscriptions
  - [ ] Cache activity data to minimize database queries
- [ ] Create upcoming deadlines widget (AC: 3)
  - [ ] Build deadline dashboard widget with priority sorting
  - [ ] Display assignments due in next 7/14/30 days
  - [ ] Add deadline countdown timers and urgency indicators
  - [ ] Implement smart deadline notifications and reminders
  - [ ] Create "overdue" section for missed deadlines
- [ ] Add quick navigation system (AC: 4)
  - [ ] Create navigation menu with course sections
  - [ ] Add breadcrumb navigation for deep linking
  - [ ] Implement quick search functionality across courses
  - [ ] Add keyboard shortcuts for power users
  - [ ] Create bookmarks/favorites for frequently accessed content
- [ ] Optimize dashboard performance (AC: 5)
  - [ ] Implement data caching strategies for frequent API calls
  - [ ] Add progressive loading for dashboard components
  - [ ] Optimize database queries to minimize API usage
  - [ ] Create efficient data fetching with Supabase RPC functions
  - [ ] Add offline capability indicators for PWA readiness

## Dev Notes

### Previous Story Context
This story builds on completed stories:
- **Epic 1 (1.1-1.3)**: Complete authentication system with student role verification
- **Epic 2 (2.1-2.3)**: Course management system, materials, and enrollment
- **Dependencies**: Requires student enrollment data, course materials access, and role-based routing

### Technical Stack Context - Free Tier Optimized
[Source: docs/prd/technical-stack.md]
- **Frontend**: Next.js, Tailwind CSS (optimized for responsive design)
- **Backend**: Supabase (Free Tier - 500MB database, 2GB bandwidth)
- **Database**: PostgreSQL via Supabase for dashboard data aggregation
- **Real-time**: Supabase subscriptions for live updates (free tier included)
- **Hosting**: Vercel (Free Tier)

### Data Models Integration
Dashboard requires data from multiple existing tables:
```sql
-- Dashboard query optimization for free tier
-- Efficient enrollment with course data
SELECT 
  c.id, c.title, c.code, c.status,
  e.enrolled_at, e.status as enrollment_status,
  COUNT(cm.id) as material_count,
  -- Future: assignment counts when Epic 4 is implemented
FROM courses c
JOIN enrollments e ON c.id = e.course_id
LEFT JOIN course_materials cm ON c.id = cm.course_id
WHERE e.student_id = $1 AND e.status = 'active'
GROUP BY c.id, e.enrolled_at, e.status
ORDER BY e.enrolled_at DESC;

-- Activity feed optimization
SELECT 
  'material' as activity_type,
  cm.name as title,
  cm.created_at,
  c.title as course_title,
  c.code as course_code
FROM course_materials cm
JOIN courses c ON cm.course_id = c.id
JOIN enrollments e ON c.id = e.course_id
WHERE e.student_id = $1 AND e.status = 'active'
  AND cm.created_at > NOW() - INTERVAL '30 days'
ORDER BY cm.created_at DESC
LIMIT 20;
```

### File Locations
Based on Next.js conventions and student dashboard:
- Dashboard pages: `pages/dashboard/` or `app/dashboard/`
- Student dashboard: `pages/dashboard/student.js` or `app/dashboard/student/page.js`
- Dashboard components: `components/dashboard/Overview.js`, `components/dashboard/CourseCards.js`
- Activity components: `components/dashboard/ActivityFeed.js`, `components/dashboard/DeadlineWidget.js`
- Dashboard utilities: `lib/dashboard.js`, `lib/activityFeed.js`
- Dashboard hooks: `hooks/useDashboard.js`, `hooks/useStudentData.js`

### Free Tier Performance Optimization
**Dashboard Loading Strategy:**
```javascript
// Optimized dashboard data loading for free tier
const DashboardData = {
  // Primary load (essential data)
  courses: () => fetchEnrolledCourses(), // Cached for 5 minutes
  deadlines: () => fetchUpcomingDeadlines(), // Cached for 10 minutes
  
  // Secondary load (progressive enhancement)
  activities: () => fetchRecentActivity(), // Cached for 2 minutes
  progress: () => fetchProgressData(), // Cached for 15 minutes
  
  // Tertiary load (nice to have)
  recommendations: () => fetchRecommendations() // Cached for 1 hour
};
```

### Dashboard Layout Structure
```jsx
// Responsive dashboard layout optimized for all devices
<DashboardLayout>
  <Header /> {/* User info, notifications, search */}
  <Sidebar /> {/* Course navigation, quick links */}
  <MainContent>
    <WelcomeSection /> {/* Personalized greeting */}
    <QuickStats /> {/* Course count, progress summary */}
    <CourseGrid /> {/* Enrolled courses with progress */}
    <ActivityFeed /> {/* Recent updates and announcements */}
    <DeadlineWidget /> {/* Upcoming assignments and deadlines */}
  </MainContent>
</DashboardLayout>
```

### Real-time Features (Free Tier)
**Supabase Subscriptions for Live Updates:**
- **Course Updates**: New materials, announcements
- **Enrollment Changes**: Course additions/removals
- **Activity Feed**: Real-time activity updates
- **Notification System**: In-app notifications for important updates

```javascript
// Efficient real-time subscriptions for free tier
const subscribeToStudentUpdates = (studentId) => {
  return supabase
    .channel('student-dashboard')
    .on('postgres_changes', {
      event: 'INSERT',
      schema: 'public',
      table: 'course_materials',
      filter: `course_id=in.(${enrolledCourseIds})`
    }, handleNewMaterial)
    .subscribe();
};
```

### Mobile-First Design Considerations
- **Touch-Friendly Interface**: Large tap targets for mobile
- **Swipe Gestures**: Intuitive navigation between sections
- **Offline Indicators**: Show what's available without internet
- **Progressive Loading**: Essential content loads first
- **Compressed Images**: Optimize course thumbnails for mobile bandwidth

### User Experience Features
- **Personalized Greeting**: Dynamic welcome messages based on time/activity
- **Smart Defaults**: Show most relevant information first
- **Quick Actions**: One-tap access to common tasks
- **Visual Progress**: Clear progress indicators and achievement badges
- **Customizable Layout**: Student can personalize dashboard arrangement
- **Dark Mode Support**: Eye-friendly viewing for extended study sessions

### Security Considerations
- **Student Data Privacy**: Only show data for enrolled courses
- **Enrollment Verification**: Verify active enrollment before displaying course data
- **Activity Logging**: Track dashboard usage for analytics (privacy-conscious)
- **Session Management**: Secure handling of student authentication state

### Performance Metrics (Free Tier Goals)
- **Initial Load**: < 2 seconds for dashboard essentials
- **Course Cards**: < 1 second for enrolled courses display
- **Activity Feed**: < 1.5 seconds for recent activities
- **Mobile Performance**: < 3 seconds on 3G connections
- **API Efficiency**: < 10 database queries per dashboard load

### Integration with Future Epics
- **Assignment Integration**: Ready for Epic 4 assignment dashboard widgets
- **Discussion Integration**: Prepared for Epic 5 discussion activity in feed
- **Gamification Elements**: Progress bars and achievement systems ready
- **Calendar Integration**: Foundation for Epic 3.2 calendar features

### Testing
Student dashboard requires comprehensive testing:
- **Performance Tests**: Loading times, API efficiency, caching effectiveness
- **Responsive Tests**: Mobile, tablet, desktop layouts
- **Real-time Tests**: Live update functionality, subscription management
- **Access Control Tests**: Student-only data access, enrollment verification
- **User Experience Tests**: Navigation flows, quick actions, accessibility

## Testing

### Testing Standards
Student dashboard testing strategy:
- **Unit Tests**:
  - Dashboard data aggregation functions (`lib/dashboard.test.js`)
  - Activity feed processing logic (`lib/activityFeed.test.js`)
  - Performance optimization utilities (`utils/dashboardOptimization.test.js`)
- **Component Tests**:
  - Course card rendering and interactions
  - Activity feed updates and filtering
  - Deadline widget countdown and notifications
  - Responsive layout behavior across screen sizes
- **Integration Tests**:
  - Supabase dashboard data queries (`api/dashboard.test.js`)
  - Real-time subscription functionality
  - Student enrollment verification and data access
- **E2E Tests**:
  - Complete student dashboard user journey
  - Mobile dashboard navigation and functionality
  - Cross-course data aggregation and display
- **Performance Tests**:
  - Dashboard loading times under various conditions
  - API efficiency and caching effectiveness
  - Mobile performance on slower connections

Test file locations:
- `__tests__/dashboard/dashboardComponents.test.js`
- `__tests__/api/dashboardApi.test.js`
- `__tests__/e2e/studentDashboard.test.js`
- `__tests__/performance/dashboardPerformance.test.js`

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-07-21 | 1.0 | Initial story creation with free tier and mobile optimization | Scrum Master (Bob) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be populated here after implementation*
