# Story 2.1: Student Semester Course Viewing

## Status
Draft

## Story
**As a** student,  
**I want** to view my semester courses,  
**so that** I can see all the courses I'm enrolled in and access course-specific information

## Acceptance Criteria
1. Student can see a list of all courses they are enrolled in for the current semester
2. Course list displays course title, semester, and basic course information
3. Each course shows enrollment status and visibility settings
4. Student can click on a course to navigate to the course detail/materials page
5. Course list is organized and easy to scan (responsive design)
6. Only enrolled courses are visible to the student (proper access control)
7. Empty state is handled gracefully when student has no enrolled courses

## Tasks / Subtasks

- [ ] Task 1: Create course data models and database schema (AC: 1, 2, 6)
  - [ ] Design Course model in Prisma schema
  - [ ] Create Enrollment model to link students to courses
  - [ ] Add semester and visibility fields to Course model
  - [ ] Set up proper foreign key relationships
  - [ ] Add Zod validation schemas for course data

- [ ] Task 2: Implement course enrollment query APIs (AC: 1, 6)
  - [ ] Create Server Action to fetch student's enrolled courses
  - [ ] Add student role verification for course access
  - [ ] Implement current semester filtering logic
  - [ ] Add error handling for course queries
  - [ ] Ensure proper data sanitization and security

- [ ] Task 3: Build course list UI components (AC: 2, 3, 5, 7)
  - [ ] Create CourseCard component showing course details
  - [ ] Build CourseList container component
  - [ ] Add responsive grid layout with TailwindCSS
  - [ ] Implement empty state component for no courses
  - [ ] Style components with shadcn/ui design system

- [ ] Task 4: Integrate course list into student dashboard (AC: 1, 4)
  - [ ] Add course list to `/dashboard/student` page
  - [ ] Create navigation structure for course access
  - [ ] Add course detail page routing (`/dashboard/student/courses/[id]`)
  - [ ] Implement proper loading states and error boundaries

- [ ] Task 5: Add course interaction features (AC: 4)
  - [ ] Make course cards clickable with proper navigation
  - [ ] Add hover states and interaction feedback
  - [ ] Implement course quick actions (if applicable)
  - [ ] Add breadcrumb navigation for course pages

- [ ] Task 6: Implement semester and enrollment logic (AC: 1, 6)
  - [ ] Add semester detection and filtering
  - [ ] Implement enrollment status checking
  - [ ] Add course visibility rules (public/private courses)
  - [ ] Ensure students only see their enrolled courses

- [ ] Task 7: Test student course viewing functionality (AC: 1, 2, 3, 4, 5, 6, 7)
  - [ ] Test course list display with various enrollment scenarios
  - [ ] Test responsive design across different screen sizes
  - [ ] Test empty state when student has no courses
  - [ ] Test navigation to course detail pages
  - [ ] Test access control (students only see their courses)
  - [ ] Test semester filtering and course visibility
  - [ ] Test loading states and error handling

## Dev Notes

### Previous Epic Insights
**Epic 1 (Authentication & Authorization)** established:
- Student role authentication with BetterAuth
- Student dashboard layout at `/dashboard/student`
- Role-based access control with middleware
- User model in database with role support
- Session management with JWT cookies

### Course Management Architecture
- **Student Experience**: Smooth and motivating academic experience [Source: prd/07-7-epics-stories.md]
- **Course Access**: Students can view semester courses [Source: prd/07-7-epics-stories.md]
- **Role-Based Access**: Student-specific dashboard and features [Source: architecture/03-authorization-flow.md]

### Database Schema Requirements
- **Course Model**: New model for course information and management
- **Enrollment Model**: Junction table linking students to courses
- **User Model**: Existing model with Student role support [Source: Epic 1]
- **ORM**: Prisma for course and enrollment queries [Source: architecture/04-database.md]
- **Database**: NeonDB PostgreSQL for course data storage [Source: architecture/04-database.md]

### Frontend Architecture Requirements
- **Framework**: Next.js App Router with student dashboard integration [Source: architecture/01-frontend.md]
- **UI Components**: shadcn/ui components for course listing interface [Source: architecture/01-frontend.md]
- **Styling**: TailwindCSS for responsive course grid layout [Source: architecture/01-frontend.md]
- **Student Dashboard**: Extension of existing `/dashboard/student` layout [Source: Epic 1]

### API Implementation Requirements
- **Server Actions**: Next.js Server Actions for course queries [Source: architecture/02-backend-logic.md]
- **Validation**: Zod for course data validation [Source: architecture/02-backend-logic.md]
- **Authorization**: Student role verification for course access

### Data Models Required
```typescript
// New Course model
Course {
  id, title, description, semester, visibility, createdAt, updatedAt
}

// New Enrollment model  
Enrollment {
  id, studentId, courseId, enrolledAt, status
}

// Extend existing User model relationship
User {
  id, email, role, enrollments: Enrollment[]
}
```

### File Locations (Building on Epic 1)
- Course components: `src/components/student/CourseList.tsx`, `src/components/student/CourseCard.tsx`
- Course pages: `src/app/dashboard/student/courses/page.tsx`
- Course detail: `src/app/dashboard/student/courses/[id]/page.tsx`
- Course APIs: `src/app/dashboard/student/courses/actions.ts`
- Database schema: Update Prisma schema for Course and Enrollment models

### UI/UX Requirements
- **Course Cards**: Display title, semester, enrollment status
- **Grid Layout**: Responsive course grid that works on all devices
- **Navigation**: Clear path from course list to course details
- **Empty States**: Friendly message when no courses are enrolled
- **Loading States**: Skeleton loading for course data fetching
- **Interactive Elements**: Hover effects and clear click targets

### Security and Access Control
- **Student-Only Access**: Verify student role for all course endpoints
- **Enrollment Verification**: Students only see courses they're enrolled in
- **Data Sanitization**: Proper data validation and sanitization
- **Course Visibility**: Respect course visibility settings
- **Session Validation**: Ensure valid student session for access

### Business Rules
- **Current Semester**: Show courses for the active/current semester
- **Enrollment Status**: Only display courses where student is actively enrolled
- **Course Visibility**: Respect instructor-set course visibility rules
- **Auto-Population**: Courses are populated from admin backend (per PRD)

### Integration Points
- **Authentication**: Leverages Epic 1 authentication system
- **Role System**: Uses existing student role validation
- **Dashboard**: Integrates with existing student dashboard layout
- **Future Stories**: Foundation for course materials, assignments, calendar

### Testing Requirements
- **Database Tests**: Course and enrollment model operations
- **API Tests**: Course fetching with proper access control
- **UI Tests**: Course list rendering and navigation
- **Security Tests**: Access control and enrollment verification
- **Responsive Tests**: Course grid layout across device sizes
- **Integration Tests**: End-to-end course viewing workflow

### Project Structure Notes
Building on Epic 1 foundation:
- Student dashboard layout exists at `/dashboard/student`
- Authentication and role system in place
- Need to add course and enrollment database models
- Need to create course-specific UI components
- Need to extend dashboard with course navigation

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-07-23 | 1.0 | Initial story creation | Scrum Master (Bob) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References  
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent QA review of the completed story implementation*
